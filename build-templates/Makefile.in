# DO NOT MODIFY!  This script is generated by mcf.  Changes made
# here will be lost.  The source for this file is in build-templates/Makefile.in.
#
# Copyright (c) 2008-2014 LG Electronics, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

srcdir := @srcdir@
machines := @machines@

TIME := time

webos-image:
all: webos-image

force:;:

oe-init-build-env mcf.status Makefile conf/local.conf conf/bblayers.conf: \
	$(srcdir)/build-templates/oe-init-build-env.in \
	$(srcdir)/build-templates/mcf-status.in \
	$(srcdir)/build-templates/Makefile.in \
	$(srcdir)/build-templates/local-conf.in \
	$(srcdir)/build-templates/bblayers-conf.in
	./mcf.status

# everything else is already set by oe-init-build-env
BITBAKE := . $(srcdir)/oe-init-build-env && bitbake

### intended for command line use
BBFLAGS =

%:; for MACHINE in $(machines) ; do $(BITBAKE) $(BBFLAGS) $*; done

define convenience
$(1)-$(2)-%:; export MACHINE=$(1) && $(TIME) $(MAKE) $(2)-$$*
$(1)-%:; for MACHINE in $(machines) ; do $$(BITBAKE) $(BBFLAGS) -c $(1) $$*; done
endef

conveniences := \
	clean \
	cleanall \
	cleansstate \
	compile \
	configure \
	fetch \
	fetchall \
	install \
	listtasks \
	package \
	patch \
	patchall \
	unpack \
	unpackall \

# Used by _bitbake() in bitbake-bash_completion
_display_conveniences:
	@echo $(conveniences)

$(foreach c, $(conveniences),$(eval $(call convenience,$(c))))

# In most cases, "install-foo" is a coded request
# for 'bitbake -c install foo'.  However, at least one component has a
# name prefixed by "install-".  Hence the need for the "just-" target
# which lets us name "just-install-first" in order to request
# "install-first".  (Yes, I'm sorry it's complicated.)
just-%:; $(BITBAKE) $(BBFLAGS) $*
